<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-12-08 Tue 16:11 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Nancy&rsquo;s Guide to Dungeon Topology</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Nancy" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet"
                     href="../assets/style.css"
                     type="text/css"/>
                     <link href="https://fonts.googleapis.com/css?family=Domine:wght@500&display=swap"
                     rel="stylesheet"
                     type="text/css"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">Nancy&rsquo;s Guide to Dungeon Topology</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org6c2b5ec">What da heckie is <i>dungeon topology</i>?</a></li>
<li><a href="#org2e1e8dd">What da heckie is a <i>dungeon</i>?</a></li>
<li><a href="#org76ccf04">Dungeon states</a>
<ul>
<li><a href="#org7c72841">What da heckie is <i>state</i>?</a></li>
<li><a href="#org410eb52">What da heckie a <i>state variable</i>?</a></li>
<li><a href="#orgdd8c4e8">What da heckie is a <i>side effect</i>?</a></li>
<li><a href="#org9b7452e">What da heckie is a <i>configuration</i>?</a></li>
<li><a href="#org200f0d5">What da heckie is a <i>state space</i>?</a></li>
<li><a href="#orgd111b10">What da heckie is a <i>state space diagram</i>?</a></li>
<li><a href="#org523d371">What da heckie does a <i>state space diagram</i> haf ta do wif <i>state variables</i>?</a>
<ul>
<li><a href="#orga993173">How many possible dungeon configurations are there?</a></li>
<li><a href="#org7abefbe">State space diagrams show every possible configuration</a></li>
<li><a href="#org6488f2e"><span class="todo TODO">TODO</span> State space constraints</a></li>
</ul>
</li>
<li><a href="#orga096724">State space semantics and notation</a>
<ul>
<li><a href="#org2db0e96"><span class="todo TODO">TODO</span> State space as a formal language</a></li>
<li><a href="#orge1810ab">States</a></li>
<li><a href="#orgaf6752e"><span class="todo TODO">TODO</span> Actions</a></li>
<li><a href="#orgac63d0c"><span class="todo TODO">TODO</span> Action sequences</a></li>
</ul>
</li>
<li><a href="#orge89d33e">What da heckie are <i>configuration classes</i>?</a></li>
</ul>
</li>
<li><a href="#orgc1e731d">Dungeon topology</a>
<ul>
<li><a href="#org5be45bb">The dungeon map</a>
<ul>
<li><a href="#orgcdb2fad"><span class="todo TODO">TODO</span> Considering distance</a></li>
<li><a href="#orgd537fe1"><span class="todo TODO">TODO</span> Conditional topology (updated: <span class="timestamp-wrapper"><span class="timestamp">&lt;2020-12-07 Mon&gt;</span></span>)</a></li>
<li><a href="#org0a5e019"><span class="todo TODO">TODO</span> Topological templates</a></li>
</ul>
</li>
<li><a href="#org4c153e4">Dungeon space</a>
<ul>
<li><a href="#org866e280"><span class="todo TODO">TODO</span> Conditional topology × state space (updated: <span class="timestamp-wrapper"><span class="timestamp">&lt;2020-12-07 Mon&gt;</span></span>)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org304f0b7"><span class="todo TODO">TODO</span> Analysis: Temple of Time (Twilight Princess)</a></li>
<li><a href="#org555f78c"><span class="todo TODO">TODO</span> Analysis of game mechanics</a></li>
<li><a href="#orgb2cd973"><span class="todo TODO">TODO</span> Dungeon generation (updated: <span class="timestamp-wrapper"><span class="timestamp">&lt;2020-12-07 Mon&gt;</span></span>)</a></li>
<li><a href="#org933d884"><span class="todo TODO">TODO</span> Information theory analysis</a></li>
</ul>
</div>
</div>
<p>
an assimilation of <a href="20201118132041-dungeon_topology_notes.html">Dungeon Topology Notes</a> !!
</p>

<p>
<i>big wip!</i>
</p>

<div id="outline-container-org6c2b5ec" class="outline-2">
<h2 id="org6c2b5ec">What da heckie is <i>dungeon topology</i>?</h2>
<div class="outline-text-2" id="text-org6c2b5ec">
<p>
It&rsquo;s a way of analysing Zelda-style <b>dungeons</b>! :0
</p>

<p>
(It&rsquo;s using state space diagrams of some sort to map out the progression of Zelda-style dungeons!)
</p>

<p>
The ultimate goal I have in mind for this dungeon topology stuff is to create a formula for either randomly generating dungeons or to use as a guide for designing your own dungeons of arbitrary complexity!
</p>
</div>
</div>

<div id="outline-container-org2e1e8dd" class="outline-2">
<h2 id="org2e1e8dd">What da heckie is a <i>dungeon</i>?</h2>
<div class="outline-text-2" id="text-org2e1e8dd">
<p>
I&rsquo;m not sure! XD I think it&rsquo;s where you throw prisoners to rot or something. Just kidding! It&rsquo;s <i>actually</i> like the dungeons in Zelda! Where there are enemies and puzzles and you have to navigate through all the dungeon puzzles to the boss! (Or something like that! <code>0_0</code>)
</p>

<p>
More specifically, what gives a dungeon its identity? I claim it&rsquo;s the following three things:
</p>
<ul class="org-ul">
<li>the set of all possible <i>dungeon configurations</i> a dungeon can have at any given time</li>
<li>the set of all possible <i>meaningful actions</i> the player can take in any one dungeon configuration that causes the dungeon to end up in a different configuration</li>
<li>the dungeon&rsquo;s <i>topological template</i>: the set of all possible paths the player can take from any one location in the dungeon to any other location in the dungeon <i>as a function of the dungeon&rsquo;s current state</i>.</li>
</ul>

<p>
We&rsquo;ll talk about all three of these things!
</p>
</div>
</div>

<div id="outline-container-org76ccf04" class="outline-2">
<h2 id="org76ccf04">Dungeon states</h2>
<div class="outline-text-2" id="text-org76ccf04">
</div>
<div id="outline-container-org7c72841" class="outline-3">
<h3 id="org7c72841">What da heckie is <i>state</i>?</h3>
<div class="outline-text-3" id="text-org7c72841">
<p>
The first thing to note about a dungeon is that it has <b>state</b>. That means at any given time the configuration of the dungeon might be one thing or it might be another.
</p>

<p>
For example, a particular door might be locked or unlocked, a particular switch might be pressed or unpressed, a certain chest might have yet to be opened, or it might have already been opened, a particular enemy might have been defeated, or it might still be lurking.
</p>

<p>
Often the physical structure of the dungeon is dynamic too. Some passageways may or may not be accessible at any given time!
</p>

<p>
All of these particularities of the configuration of the dungeon at any point in time is called the dungeon&rsquo;s current <i>state</i>.
</p>
</div>
</div>

<div id="outline-container-org410eb52" class="outline-3">
<h3 id="org410eb52">What da heckie a <i>state variable</i>?</h3>
<div class="outline-text-3" id="text-org410eb52">
<p>
The state is controlled by a collection of variables called <b>state variables</b>. These are variables whose value can change over the course of progressing through the dungeon. The values of these variables determine or represent certain aspects of the current configuration of the dungeon.
</p>

<p>
For example, there could be a variable called <code>defeated_miniboss</code> which has the value of <code>false</code> until you have defeated the miniboss, after which it has the value of <code>true</code>! Further, maybe this variable also corresponds to whether a certain chest has appeared yet (such as chest that appears after the miniboss has been defeated).
</p>

<p>
A value of <code>true</code> or <code>false</code> is called a <i>boolean value</i>, and a variable that has a value of either <code>true</code> or <code>false</code> is called a <i>boolean variable</i>.
</p>
</div>
</div>

<div id="outline-container-orgdd8c4e8" class="outline-3">
<h3 id="orgdd8c4e8">What da heckie is a <i>side effect</i>?</h3>
<div class="outline-text-3" id="text-orgdd8c4e8">
<p>
State variables generally change in response to meaningful <b>actions</b> of the player! An action that causes a change in a state variable is said to have a <b>side effect</b>. A <i>side effect</i> is a change in dungeon state that occurs as an external consequence to some <i>action</i>.
</p>

<p>
For example, if the player presses a switch, and suddenly a water wheel kicks into action, the <i>action</i> is the pressing of the switch, and the <i>side effect</i> is the activation of the water wheel.
</p>

<p>
More specifically, the action of pressing the switch has the side effect of <i>changing a state variable</i>, maybe one called <code>water_wheel_activated</code>!
</p>
</div>
</div>

<div id="outline-container-org9b7452e" class="outline-3">
<h3 id="org9b7452e">What da heckie is a <i>configuration</i>?</h3>
<div class="outline-text-3" id="text-org9b7452e">
<p>
At any given time, the dungeon&rsquo;s state variables might have any number of possible combinations of values. The current combination of values makes up the current <b>configuration</b> of the dungeon.
</p>

<p>
For example, the player may have unlocked the door, but not activated the water wheel. Or the player may have unlocked the door and activated the water wheel. These are two distinct <i>configurations</i> of the dungeon.
</p>

<p>
In additon, the <i>set of all possible actions</i> that the player can take at any given time is dependant on the configuration at that time.
</p>

<p>
For example, suppose the switch to activate the water wheel is behind the locked door, and suppose the player hasn&rsquo;t yet unlocked the door. In this configuration, the player doesn&rsquo;t have the luxury to activate the water wheel just yet, but they may be able to unlock the door if they have a key! Now suppose the door has been unlocked. In this configuration, the player is able to activate the water wheel, an action that wasn&rsquo;t available to them in the other configuration!
</p>
</div>
</div>

<div id="outline-container-org200f0d5" class="outline-3">
<h3 id="org200f0d5">What da heckie is a <i>state space</i>?</h3>
<div class="outline-text-3" id="text-org200f0d5">
<p>
The <b>state space</b> of the dungeon is like a map of all possible configurations. All the <i>points</i> in this space are unique configurations of the dungeon. Each point also has any number of <i>paths</i> from it to another point. These paths are the particular actions available to the player when the dungeon is in that configuration.
</p>

<p>
Just to give you a preview of next topic, here&rsquo;s a simple <i>state space diagram</i> showing a dungeon progression from the start to getting a key to unlocking the door and exiting the dungeon:
</p>


<div id="org183bcba" class="figure">
<p><img src="../images/dungeon_a.png" alt="dungeon_a.png" />
</p>
</div>

<p>
(Note that it might be counterintuitive to think of the player&rsquo;s possession of a key as an aspect of <i>dungeon</i> state. It might be more intuitive to think of it as <i>player</i> state, because it&rsquo;s the player who either does or doesn&rsquo;t possess the key at any given time. But for these purposes we&rsquo;ll consider player state as a part of dungeon state. And so we&rsquo;ll say that there is a dungeon configuration such that the player possesses the key and a separate dungeon configuration such that the player doesn&rsquo;t possess the key.)
</p>

<p>
Here, you start the dungeon in the &ldquo;S&rdquo; configuration (S for start). From there your only meaningful action is to obtain the key, which puts you in the &ldquo;K&rdquo; configuration (K for key). Once you have the key, your only meaningful action is to unlock and exit the door, which puts you in the &ldquo;D&rdquo; configuration (D for door)!
</p>

<p>
What the state space diagram tells you at a glance is how many possible configurations of the dungeon there are and what sorts of routes you can take if you want to get from configuration A to configuration B.
</p>
</div>
</div>

<div id="outline-container-orgd111b10" class="outline-3">
<h3 id="orgd111b10">What da heckie is a <i>state space diagram</i>?</h3>
<div class="outline-text-3" id="text-orgd111b10">
<p>
As introduced above, a <b>state space diagram</b> is a visual depiction of the state space of a dungeon, including labeled circles representing all possible configurations as well as arrows between the circles representing the possible actions that get you from one configuration to another.
</p>
</div>
</div>

<div id="outline-container-org523d371" class="outline-3">
<h3 id="org523d371">What da heckie does a <i>state space diagram</i> haf ta do wif <i>state variables</i>?</h3>
<div class="outline-text-3" id="text-org523d371">
<p>
Recall that a <i>dungeon configuration</i> is determined by a particular unique combination of the dungeon&rsquo;s state variables. In other words, a particular set of values per state variable denotes a particular dungeon configuration.
</p>

<p>
For example, suppose a dungeon has a <i>big scary door</i> and a <i>water wheel</i>. The big scary door can be either <i>locked</i> or <i>unlocked</i>, and the water wheel can be either <i>active</i> or <i>inactive</i>. This might naturally be represented in terms of the state variables <code>big_scary_door_unlocked</code> and <code>water_wheel_active</code>. When the variable <code>big_scary_door_unlocked</code> has value <code>false</code>, the big scary door is locked, and when it has value <code>true</code>, the big scary door is unlocked. When the variable <code>water_wheel_active</code> has value <code>false</code>, the water wheel is inactive, and when it has value <code>true</code>, the water wheel is active.
</p>

<p>
Quick detour!
</p>
</div>

<div id="outline-container-orga993173" class="outline-4">
<h4 id="orga993173">How many possible dungeon configurations are there?</h4>
<div class="outline-text-4" id="text-orga993173">
<p>
Notice that a boolean variable has <i>two</i> possible values: namely, <code>true</code> and <code>false</code>. Notice that a pair (group of two) of boolean variables has <i>four</i> possible <i>combinations</i> of values: namely, (<code>true</code> and <code>true</code>), (<code>true</code> and <code>false</code>), (<code>false</code> and <code>true</code>), and (<code>false</code> and <code>false</code>). That&rsquo;s because the first one can be true and the second one can be true. Or the first one can be true and the second one can be false. Or the first one can be false and the second one can be true. Or they can both be false.
</p>

<p>
In general, if we have a collection of <code>n</code> boolean variables, the number of possible combinations of values for those variables is <code>2ⁿ</code>. This checks out. If <code>n = 1</code> then we have <code>2¹ = 2</code> possible values. If <code>n = 2</code> then we have <code>2² = 4</code> possible values, which we just saw was the case. If <code>n = 3</code> then we have <code>2³ = 8</code> and so on and so forth!
</p>

<p>
All of this is to say that the maximum number of possible dungeon configurations for a dungeon whose state variables have all boolean values, is always <code>2ⁿ</code>, where <code>n</code> is the number of state variables the dungeon has.
</p>

<p>
(As a heads up, notice that this is only the <i>maximum</i> number of possible dungeon configurations considering only the number of state variables. In practice, not all possible combinations are obtainable given the possible sequences of actions available to the player, and thus the set of all possible dungeon configurations actually obtainable is smaller. But more about this later!)
</p>
</div>
</div>

<div id="outline-container-org7abefbe" class="outline-4">
<h4 id="org7abefbe">State space diagrams show every possible configuration</h4>
<div class="outline-text-4" id="text-org7abefbe">
<p>
Now we can see the more clearly note the correlation between state space diagrams and state space variables.
</p>

<p>
Suppose we have a dungeon with <i>two</i> state variables: <code>a</code> and <code>b</code>. Then we know there are <i>four</i> possible combinations of values for these two variables, and thus we know that there is a maximum of <i>four</i> possible dungeon configurations.
</p>

<p>
This is clearly depicted in the state space diagram for this dungeon. Every configuration shown on the state space diagram (of which there are four) corresponds to exactly one of the four possible combinations of state space variables. Sometimes we want to make explicit the variable combination that the configuration shown in the state space diagram corresponds to. To do this we can use subscripts on the labels:
</p>


<div id="org6df6a91" class="figure">
<p><img src="../images/dungeon_c.png" alt="dungeon_c.png" />
</p>
</div>

<p>
Recall that we have two state variables, <code>a</code> and <code>b</code>, the values of which there are four possible combinations. Hence, four configurations are depicted in the diagram. The subscripts make explicit which combination of the values of variables <code>a</code> and <code>b</code> that configuration corresponds to. For example, configuration D<sub>ab</sub> is the configuration such that the values of <code>a</code> and <code>b</code> are both true. The configuration C<sub>b</sub> is the configuration such that only the value of <code>b</code> is true. The configuration C<sub>a</sub> is the configuration such that only the value of <code>a</code> is true. And lastly the configuration A_∅ is the configuration such that the value of none the variables is true (∅ denotes the empty set).
</p>

<p>
Notice that I didn&rsquo;t draw any arrows on this diagram yet! That&rsquo;s because the set of state variables alone doesn&rsquo;t contain any information about the particular actions the player can perform in any given state. That is to say that the dungeon is more than just its collection of state variables: it&rsquo;s also the possible paths between configuration states. A state space diagram is able to capture both of these aspects of the dungeon simultaneously. (And we&rsquo;ll see later that a dungeon&rsquo;s topology is also a key defining element.)
</p>
</div>
</div>

<div id="outline-container-org6488f2e" class="outline-4">
<h4 id="org6488f2e"><span class="todo TODO">TODO</span> State space constraints</h4>
<div class="outline-text-4" id="text-org6488f2e">
</div>
<ul class="org-ul">
<li><a id="org0790800"></a><span class="todo TODO">TODO</span> Explicit constraints<br /></li>

<li><a id="org130ea28"></a><span class="todo TODO">TODO</span> Topologically implied constraints<br /></li>
</ul>
</div>
</div>

<div id="outline-container-orga096724" class="outline-3">
<h3 id="orga096724">State space semantics and notation</h3>
<div class="outline-text-3" id="text-orga096724">
</div>
<div id="outline-container-org2db0e96" class="outline-4">
<h4 id="org2db0e96"><span class="todo TODO">TODO</span> State space as a formal language</h4>
</div>

<div id="outline-container-orge1810ab" class="outline-4">
<h4 id="orge1810ab">States</h4>
<div class="outline-text-4" id="text-orge1810ab">
</div>
<ul class="org-ul">
<li><a id="org5c678ca"></a>Starting states<br />
<div class="outline-text-5" id="text-org5c678ca">
<p>
A <b>starting state</b> is a dungeon configuration the dungeon can have when the player firsts begins the dungeon.
</p>

<p>
We can visually depict a starting state in a state space diagram by writing an asterisk by the label. Additionally, we might want to label the state as &ldquo;S&rdquo;, for &ldquo;start&rdquo;:
</p>


<div id="orgca4fe99" class="figure">
<p><img src="../images/dungeon_d.png" alt="dungeon_d.png" />
</p>
</div>

<p>
Here we have a dungeon configuration labeled &ldquo;S*_∅&rdquo; or &ldquo;S&rdquo; for short. The * tells us that this is a configuration that the dungeon could be in when the player first enters the dungeon anew. The ∅ tells us that this configuration corresponds to the dungeon configuration such that all state variables have a value of <code>false</code>.
</p>

<p>
(Note that it&rsquo;s not strictly necessary that all state variables have a value of <code>false</code> when the player begins a dungeon. For example, there may be a variable that corresponds to whether a water wheel is active and that this water wheel is active when the player first enters the dungeon.)
</p>

<p>
Also note that it&rsquo;s possible for a dungeon to have multiple starting states! But most will probably only have one.
</p>
</div>
</li>

<li><a id="org0341e25"></a>Solution states<br />
<div class="outline-text-5" id="text-org0341e25">
<p>
A <b>solution state</b> is any possible dungeon configuration such that the the dungeon has been completed.
</p>

<p>
For example, the completion of the dungeon might correspond to having defeated the final boss of the dungeon. There might be a variable called <code>final_boss_defeated</code> that has a value of <code>true</code> if and only if the final boss has been defeated. If we decide that the dungeon has been completed if and only if the final boss has been defeated, then this variable might as well have also been called <code>dungeon_completed</code>, because by our definition of completion, it reflects exactly the same information. In any case, any dungeon configuration such that the value of this variable is <code>true</code> is called a <i>solution state</i>.
</p>

<p>
We can visually depict a solution state in a state space diagram by drawing a double circle, like this:
</p>


<div id="orgbd36ed9" class="figure">
<p><img src="../images/dungeon_e.png" alt="dungeon_e.png" />
</p>
</div>

<p>
Here we have a dungeon configuration labeled &ldquo;A<sub>d</sub>&rdquo; or &ldquo;A&rdquo; for short. The subscript d might stand for &ldquo;defeated&rdquo; as in a variable <code>final_boss_defeated</code> and tells us that in this configuration, the value of this variable is <code>true</code>.
</p>

<p>
Note that it&rsquo;s also possible for a dungeon to have multiple solution states. Unlike as is the case with starting states, however, there most often <i>will</i> be multiple solution states.
</p>

<p>
Note also that it would technically be possible for a configuration to be both a starting state <i>and</i> a solution state at once. But this wouldn&rsquo;t be very interesting, because the dungeon would be completed as soon as it began! XD
</p>
</div>
</li>

<li><a id="orgaccc9eb"></a>Non-solution states<br />
<div class="outline-text-5" id="text-orgaccc9eb">
<p>
A non-solution state is any possible dungeon configuration such that the dungeon has <i>not</i> been completed. Simply put, every configuration that isn&rsquo;t a solution state, is a non-solution state.
</p>

<p>
We visually depict a non-solution state by drawing a single circle, in contrast with the double circle depicting a solution state:
</p>


<div id="org7baf71c" class="figure">
<p><img src="../images/dungeon_f.png" alt="dungeon_f.png" />
</p>
</div>

<p>
Here we have a non-solution state labeled &ldquo;Z&rdquo;. We know it&rsquo;s not a solution state because there is only a single circle drawn around the label.
</p>

<p>
To be precise, it&rsquo;s <i>impossible</i> for a configuration to be simultaneously a solution state <i>and</i> a non-solution state. This is because the set of solution states and the set of non-solution states are <i>disjoint</i>, meaning they are completely mutually exclusive: if an element is in one set, it is necessarily not in the other.
</p>
</div>
</li>

<li><a id="orgc804b90"></a>Non-states<br />
<div class="outline-text-5" id="text-orgc804b90">
<p>
A non-state is any impossible dungeon configuration. That is, some combination of values for state variables that can never occur in the dungeon. The existence of non-states is the reason why the number of configurations in the state space diagram is usually less than the maximum number of possible configurations.
</p>

<p>
More specifically, what makes a dungeon configuration a non-state is that there are <i>no possible sequences of actions the player can take from any starting state that results in the dungeon having that configuration</i>.
</p>

<p>
Interestingly though, there may exist possible sequences of actions the player could take from any other <i>non-state</i> that could lead to a non-state. In other words, <i>the only possible ways to get to a non-state are by starting from any other non-state</i>.
</p>

<p>
Normally we don&rsquo;t draw non-states in our state space diagrams because these are states that we are generally not interested in since the player can never reach them under normal circumstances (that is, without hacking!). However, we might want to draw them in order to make explicit that it is a non-state.
</p>

<p>
A non-state is easily seen as a configuration X such that there is <i>no chain of arrows from any starting state to X</i>. Observe the following state space diagram:
</p>


<div id="org8c7d8bd" class="figure">
<p><img src="../images/dungeon_g.png" alt="dungeon_g.png" />
</p>
</div>

<p>
Here, S is a <i>starting state</i> (as depicted by the *); A and E are <i>solution states</i> (as depicted by the double circle); S, A, C, and G are <i>states</i> (that is, they aren&rsquo;t <i>non-states</i>); and D, F, B, and E are <i>non-states</i>.
</p>

<p>
Notice that there are three <i>islands</i> in this state space: a first island consists of configurations S, A, C, G, and D; a second island consists of E and B; and a third island consists only of F.
</p>

<p>
Notice that A, C, and G <i>are</i> states. It&rsquo;s easy to see why: there is a path from a starting state (S) to them: From S you can go directly to A, directly to C, and indirectly to G (by first going to C, and then to G). That is to say, to recall the definition of a non-state, that, in contrast to non-states, there <i>is</i> a possible sequence of actions the player can take from a starting state that results in that configuration. This is depicted as a chain of arrows from S to A, C, or G.
</p>

<p>
Notice also that S is <i>also</i> a state. This is less obvious, because there are no chains of arrows that begin with S and end with S. But the definition of a state states that a configuration is a state if and only if there exists a sequence of actions a player can take from any starting state to that configuration. And there is! Namely: the <b>empty sequence</b>. That is if the player is in S and takes the sequence of actions that consists of no actions the player will end up in S. Therefore S is not a non-state!
</p>

<p>
Notice that D is a non-state. Don&rsquo;t be confused by the arrow that goes from D to S: they player can get to S from D, but, critically, the player can never get to D if they are in S. It&rsquo;s impossible to get to D, and that&rsquo;s what makes it a non-state.
</p>

<p>
B and E are both non-states. Don&rsquo;t be confused that E is a solution state. It&rsquo;s totally possible that a configuration is both a solution state and a non-state. It&rsquo;s a non-state solution state! (<i>Not</i> to be confused with a non-solution state! XD)
</p>

<p>
Notice also that F is a non-state. It&rsquo;s easy to see why. But notice also that it is on a separate island as the island containing S. And notice that non-states B and E are also on an island separate from S. More generally, notice that <i>all states (non-non-states) are on an island containing a starting state</i>. Notice that the coverse is <i>not</i> true: namely, it is <i>false</i> that <i>all states on an island containing a starting state are states (non-non-states)</i>. D is an example of this: D is on a island containing a starting state, but D is not a state.
</p>
</div>

<ul class="org-ul">
<li><a id="org1cfcb8d"></a>Configuration v.s. state<br />
<div class="outline-text-6" id="text-org1cfcb8d">
<p>
Until now I have been trying to carefully avoid mixing up the words for <i>configuration</i> and <i>state</i>, but I haven&rsquo;t explicitly stated why. XD The reason is that both states and non-states are configurations. There exists a configuration for every combination of values for state variables. Some of those combinations are obtainable and thus correspond to <i>states</i>, and the rest are unobtainable and thus correspond to <i>non-states</i>.
</p>
</div>
</li>
</ul>
</li>
</ul>
</div>

<div id="outline-container-orgaf6752e" class="outline-4">
<h4 id="orgaf6752e"><span class="todo TODO">TODO</span> Actions</h4>
<div class="outline-text-4" id="text-orgaf6752e">
<p>
An action is anything that the player can do in one configuration that leads to a different configuration.
</p>

<p>
In the state space diagrams, the actions are represented by the arrows drawn between the circles. We can label the arrows with single lowercase letters denoting a particular action.
</p>

<p>
Here is an example of two configurations A and B, with the action from A to B labeled &ldquo;d&rdquo;:
</p>


<div id="org247a6f8" class="figure">
<p><img src="../images/dungeon_h.png" alt="dungeon_h.png" />
</p>
</div>

<p>
Maybe configuration A is a configuration before a monster has been defeated and configuration B is a configuration after it has been defeated. The action &ldquo;d&rdquo; the is the action of defeated that monster.
</p>

<p>
Observe this diagram:
</p>


<div id="org88b5d23" class="figure">
<p><img src="../images/dungeon_i.png" alt="dungeon_i.png" />
</p>
</div>

<p>
First note that there are four states: A_∅, B<sub>w</sub>, C<sub>wo</sub>, and D<sub>o</sub>. Second note that there are three actions: <code>a</code>, <code>d</code>, and <code>u</code>. Also note that in association with the four states there are two variables: <code>w</code> and <code>o</code>.
</p>

<p>
We can imagine this might be a scenario where there is a possibly locked door and a water wheel. The water wheel can be either activated or deactivated, and the door, independantly, can be either locked or unlocked. We can associate the variable <code>o</code> with the door such that the door is unlocked if and only if the value of <code>o</code> is <code>true</code>. And we can associate the variable <code>w</code> with the water wheel such that the water wheel is activated if and only if the value of <code>w</code> is <code>true</code>.
</p>

<p>
With this established, we can see that configurations A and D are configurations such that the water wheel is <i>deactivated</i>, and we can see that configurations B ad C are configurations such that the water wheel is <i>activated</i>. And we can see that configurations A and B are configurations such that the door is <i>locked</i>, and we can see that configurations C and D are configurations such that the door is <i>unlocked</i>.
</p>

<p>
Then we can say that the action <code>a</code> is the action of <i>activating the water wheel</i>, since all arrows labeled &ldquo;a&rdquo; are <i>from</i> a configuration such that the water wheel is <i>deactivated</i> and <i>to</i> a configuration such that the water wheel is <i>activated</i>. Similarly, we can say that the action <code>d</code> is the action of <i>deactivating the water wheel</i>, since all arrows labeled &ldquo;d&rdquo; are <i>from</i> a configurations such that the water wheel is <i>activated</i> and <i>to</i> a configuration such that the water wheel is <i>deactivated</i>. And finally, we can say that the action <code>u</code> is the action of <i>unlocking the door</i>, since all arrows labeled &ldquo;u&rdquo; are <i>from</i> a configuration such that the door is <i>locked</i> and <i>to</i> a configuration such that the door is <i>unlocked</i>.
</p>
</div>

<ul class="org-ul">
<li><a id="orgb38c07f"></a>Action alphabet<br />
<div class="outline-text-5" id="text-orgb38c07f">
<p>
The <b>action alphabet</b> for a dungeon is the set of all letters denoting all possible actions that exist in the dungeon.
</p>

<p>
In the above example, there are a total of three actions depicted in the diagram, with the names &ldquo;a&rdquo;, &ldquo;d&rdquo;, and &ldquo;u&rdquo;. So in that example, the <i>action alphabet</i> is &ldquo;adu&rdquo;.
</p>

<p>
The action alphabet gives us at a glance an idea of all the actions that exist in the dungeon.
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgac63d0c" class="outline-4">
<h4 id="orgac63d0c"><span class="todo TODO">TODO</span> Action sequences</h4>
<div class="outline-text-4" id="text-orgac63d0c">
<p>
An <b>action sequence</b> is a sequence of actions the player can take that leads them from aa starting state to any valid dungeon configuration. We can denote an action sequence as a string of letters denoting actions.
</p>

<p>
For example, if &ldquo;b&rdquo; denotes the action of using a bomb, and &ldquo;s&rdquo; denotes the action of playing a song, then the <i>action sequence</i> &ldquo;sbs&rdquo; denotes the sequence of actions such that the player first plays a song, then uses a bomb, and then plays a song again.
</p>

<p>
The simplest possible action sequence is the <b>empty sequence</b>. This is the action sequence consisting of exactly no actions at all, and it looks like this: &ldquo;&rdquo;.
</p>

<p>
Possible action sequences are completely determined by the possible chains of actions from one configuration to another. If in configuration A the action &ldquo;a&rdquo; takes the player to configuration B wherein the action &ldquo;b&rdquo; takes the player to configuration C, then, supposing the player is initially in configuration A, a possible action sequence is &ldquo;ab&rdquo;.
</p>

<p>
Let&rsquo;s look at the above example again:
</p>


<div id="org7cbe326" class="figure">
<p><img src="../images/dungeon_i.png" alt="dungeon_i.png" />
</p>
</div>

<p>
Suppose the player is initially in configuration A. What possible action sequences exist for the player?
</p>

<p>
The first sequence that we know exists is the <i>empty sequence</i>. That is to say, the player can simply do nothing at all. This is the only action sequence that we know is always valid under all circumstances.
</p>

<p>
What possible <i>single action sequences</i> exist from A? A single action sequence is an action sequence that consists of a single action. We know that there is exactly one single action sequence from some configuration for each action available from that configuration. The actions available from A, as can be seen by the arrows that start from A, are &ldquo;a&rdquo; and &ldquo;u&rdquo;. Therefore the possible single action sequences are also &ldquo;a&rdquo; and &ldquo;u&rdquo;. That is to say, if the player were in configuration A and they were given the choice to make a single action, they could either <i>activate the water wheel</i> or <i>unlock the door</i>. And note that, in this case, there are <i>two</i> possible single action sequences.
</p>

<p>
What possible <i>two action sequences</i> exist from A? A <i>two action sequence</i> is an action sequence that consists of exactly <i>two</i> actions. To find such an action sequence, we can first ask, what <i>first</i> action can the player take from A? This we already determined in the above paragraph. Then we can ask, from the configuration lead to by that action, what <i>second</i> action can the player take? These possible second actions of course can be found by the arrows from the configuration lead to by the first action.
</p>

<p>
If we attempt to manually determine all possible two action sequences from A, we find:
</p>

<dl class="org-dl">
<dt>&ldquo;ad&rdquo;</dt><dd>The player can activate the water wheel (leading to configuration B) and then deactivate the water wheel (leading back to configuration A).</dd>
<dt>&ldquo;au&rdquo;</dt><dd>The player can activate the water wheel (leading to configuration B) and then unlock the door (leading to configuration C).</dd>
<dt>&ldquo;ua&rdquo;</dt><dd>The player can unlock the door (leading to configuration D) and then activate the water wheel (leading to configuration C).</dd>
</dl>

<p>
Notice that in this particular case, there are three possible two action sequences. Why? Let&rsquo;s see: we have two possible first actions, &ldquo;a&rdquo; and &ldquo;u&rdquo;. Action &ldquo;a&rdquo; brings us to configuration B where we have two possible second actions: &ldquo;d&rdquo; and &ldquo;u&rdquo;. Thus, following the first action, we have two actions. Action &ldquo;u&rdquo; brings us to configuration D, where we only have one possible second action: &ldquo;a&rdquo;. Thus, following the second action, we have one action. The two actions following the first possible first action plus the one action following the second possible first action equals a total of three possible two action sequences.
</p>

<p>
Note that all possible two action sequences necessarily have a <i>prefix</i> that exists in the set of all possible <i>single action sequences</i>. In plain English, this means that every pair of subsequent actions from A must begin with an action from A. More generally, when N &gt; 0, all possible <i>N action sequences</i> (action sequences consisting of N number of actions) necessarily have a <i>prefix</i> that exists in the set of all possible N-1 action sequences (action sequences consisting of <i>N-1</i> number of actions). In other words, <i>all N action sequences can be formed by adding one more action to the end of an N-1 action sequence</i>.
</p>

<p>
This is true of our discovery of two action sequences above: all two action sequences begin with one of the single action sequences that we determined previously, namely either &ldquo;a&rdquo; or &ldquo;u&rdquo;.
</p>
</div>

<ul class="org-ul">
<li><a id="orgc92592e"></a>How many possible action sequences are there from some configuration?<br />
<div class="outline-text-5" id="text-orgc92592e">
<p>
Sometimes there are a <i>finite</i> number of possible action sequences, and sometimes there are an <i>infinite</i> number of possible action sequences from some configuration. (From most configurations in most dungeons there will be an infinite number of possible action sequences.)
</p>

<p>
First some examples!
</p>

<p>
Here is an example of <i>finite</i> possible action sequences from any configuration:
</p>


<div id="org447ff0e" class="figure">
<p><img src="../images/dungeon_j.png" alt="dungeon_j.png" />
</p>
</div>

<p>
From A, all possible action sequences (of which there are a finite many) are the following:
</p>

<dl class="org-dl">
<dt>&ldquo;&rdquo;</dt><dd>The player can do nothing so they remain in A.</dd>
<dt>&ldquo;a&rdquo;</dt><dd>The player can take action &ldquo;a&rdquo; leading them to C.</dd>
<dt>&ldquo;b&rdquo;</dt><dd>The player can take action &ldquo;b&rdquo; leading them to B.</dd>
<dt>&ldquo;bc&rdquo;</dt><dd>The player can take action &ldquo;b&rdquo; followed by action &ldquo;c&rdquo; leading them to C.</dd>
</dl>

<p>
From B, all possible action sequences (of which there are a finite many) are the following:
</p>

<dl class="org-dl">
<dt>&ldquo;&rdquo;</dt><dd>The player can do nothig so they remain in B.</dd>
<dt>&ldquo;c&rdquo;</dt><dd>The player can take action &ldquo;c&rdquo; leading them to C.</dd>
</dl>

<p>
From C, all possible action sequences (of which there are a finite many, in fact there is only one!) are the following:
</p>

<dl class="org-dl">
<dt>&ldquo;&rdquo;</dt><dd>The player can do nothing so they remain in C. This is the only possible action sequence in C because there are no arrows from C.</dd>
</dl>

<p>
Here is an example of <i>infinite</i> possible action sequences from any configuration:
</p>


<div id="org6da1cdc" class="figure">
<p><img src="../images/dungeon_k.png" alt="dungeon_k.png" />
</p>
</div>

<p>
Notice that this is the same example as before, except now a new arrow has been added: &ldquo;d&rdquo; from C to A.
</p>

<p>
What this means is that all possible action sequences from any configuration in this example consists of all possible action sequences from any configuration in the previous example with the addition that new action sequences can be formed by appending &ldquo;d&rdquo; to the end of any action sequence that ends in &ldquo;a&rdquo; or &ldquo;c&rdquo;. This is because actions &ldquo;a&rdquo; or &ldquo;c&rdquo; lead to configuration C, from which there is now the possible action &ldquo;d&rdquo;. But because &ldquo;d&rdquo; leads to A, and because from A there are possible actions &ldquo;a&rdquo; and &ldquo;b&rdquo;, any of the newly formed action sequences ending in &ldquo;d&rdquo; can also be appended with &ldquo;a&rdquo; or &ldquo;b&rdquo; to form yet more new possible action sequences.
</p>

<p>
In this example, this process can be repeated forever. Most important to note, is that the reason this process can be repeated forever is because of the presence of an action in the action sequence that <i>returns the player to a previously visited configuration once visited over the course of the action sequence</i>. In other words, there are <i>loops</i>. Where there are loops there are endless possibilities! Intuitively, the player can run around in circles endlessly. Concretely, the player can, for example, move from A via &ldquo;a&rdquo; to C, and then via &ldquo;d&rdquo; back to A, from which this <i>action subsequence</i> of &ldquo;ad&rdquo; can be repeated endlessly.
</p>
</div>

<ul class="org-ul">
<li><a id="org2c95eac"></a>What da heckie is a <i>loop</i>?<br />
<div class="outline-text-6" id="text-org2c95eac">
<p>
First, an <i>action subsequence</i> is a part of an action sequence. For example, in the above example, consider the action sequence from A: &ldquo;adbcdad&rdquo;. In this action sequence, &ldquo;adb&rdquo;, &ldquo;bcd&rdquo;, &ldquo;b&rdquo;, &ldquo;dbcdad&rdquo;, and even &ldquo;&rdquo; are all action subsequences, because they can be found inside of &ldquo;adbcdad&rdquo;. However, &ldquo;cdb&rdquo;, is not an action subsequence because it cannot be found inside &ldquo;adbcdad&rdquo;.
</p>

<p>
A <i>repeatable action subsequence</i> is any action subsequence that can be replaced by <i>any number of itself</i>. For example, in the same action sequence as above &ldquo;adbcdad&rdquo;, &ldquo;dbc&rdquo; is a repeatable action subsequence because it can be replaced with, &ldquo;dbcdbc&rdquo;, &ldquo;dbcdbcdbc&rdquo;, &ldquo;dbcdbcdbcdbc&rdquo;, or even &ldquo;&rdquo; and we still end up with a valid action sequence. This corresponds to a <i>loop</i> in the diagram.
</p>

<p>
What is a loop then? A first attempt at a definition says that a loop is <i>any sequence of configurations such that from each configuration in the sequence, the following configuration can be gotten to by an action, and from the last configuration in the sequence, the first configuration can be gotten to by an action</i>.
</p>

<p>
We&rsquo;ll call a sequence of configurations a <i>configuration sequence</i> to distinguish it from an <i>action sequence</i>.
</p>

<p>
For example, the loop corresponding to the repeatable action subsequence &ldquo;dbc&rdquo; is A-&gt;B-&gt;C. Another loop in the above diagram is A-&gt;C, because C can be gotten to <i>directly</i> from A, and A can be gotten to <i>directly</i> by B.
</p>

<p>
Another definition of a loop might be this: a loop is <i>any configuration sequence such that each subsequent configuration corresponds to the target of each subsequent action in some repeatable action subsequence</i>. The <i>target</i> of an action is the configuration that it leads to.
</p>

<p>
For example, consider the repeatable action subsequence &ldquo;dbc&rdquo;. We know that this corresponds to loop A-&gt;B-&gt;C. According to our second definition, this is because the target of &ldquo;d&rdquo; is A, the target of &ldquo;b&rdquo; is B, and the target of &ldquo;c&rdquo; is C.
</p>

<p>
At first thought, every configuration sequence consisting of a single configuration is a necessarily a loop, because from any configuration, the <i>empty sequence</i> will always return the player to that same configuration. However, this defies both of our definitions.
</p>

<p>
Our first definition requires that all configurations in the loop can be gotten to by an action. However this isn&rsquo;t the necessarily the case. While it <i>is</i> true that from all configurations there exists an action subsequence that leads back to that same configuration (namely, the empty sequence), it is <i>not</i> necessarily true that there is an <i>action</i> that leads back to the same configuration. Consider this diagram:
</p>


<div id="org0b0ed87" class="figure">
<p><img src="../images/dungeon_u.png" alt="dungeon_u.png" />
</p>
</div>

<p>
There are two possible action sequences from A that lead to A:
</p>

<dl class="org-dl">
<dt>&ldquo;&rdquo;</dt><dd>The player can do nothing in A, leaving them in A.</dd>
<dt>&ldquo;a&rdquo;</dt><dd>The player can perform action &ldquo;a&rdquo; in A, leading them back to A.</dd>
</dl>

<p>
In the first case, the means by which the player returns to A is <i>not</i> an action. More specifically it is the <i>lack</i> of action that leaves the player in A.
</p>

<p>
In the second case, the means by which the player returns to A <i>is</i> an action, namely &ldquo;a&rdquo;.
</p>

<p>
The difference here illustrates that the existence of the empty sequence is not sufficient to consider all configuration sequences containing a single configuration a loop.
</p>

<p>
With our second definition it&rsquo;s more straightforward. The definition says that every configuration in a loop must correspond to the target of an action in a repeatable action subsequence. And while the empty sequence is a repeatable action subsequence, it contains no actions, and thus there are no targets for any configuration to correspond to.
</p>
</div>
</li>

<li><a id="orgb9504cb"></a><span class="todo TODO">TODO</span> talk about composition of action subsequences and cases of commutativity and non commutativity<br /></li>
</ul>
</li>

<li><a id="org2426612"></a><span class="todo TODO">TODO</span> Non-sequences<br />
<div class="outline-text-5" id="text-org2426612">
<p>
Not all possible strings of letters denote valid action sequences. A non-sequence is any sequence of actions that can never occur starting from a starting state.
</p>

<p>
Returing once again to the above example:
</p>


<div id="org4144f5e" class="figure">
<p><img src="../images/dungeon_i.png" alt="dungeon_i.png" />
</p>
</div>

<p>
An example of a non-sequence from A would be the sequence &ldquo;aua&rdquo;. The reason that it&rsquo;s a non sequence can be found out by following each action in the sequence on the diagram. From A, we take the &ldquo;a&rdquo; arrow to B, from which we take the &ldquo;u&rdquo; arrow to C, from which we <i>can&rsquo;t</i> take any such &ldquo;a&rdquo; arrow because there aren&rsquo;t any &ldquo;a&rdquo; arrows from C! Therefore &ldquo;aua&rdquo; is a non-sequence from A.
</p>

<p>
Notice that a string that denotes a <i>non-sequence</i> from one configuration may denote a <i>sequence</i> from another configuration. For example, the string &ldquo;uad&rdquo; from A denotes a sequence, because there is a chain of arrows &ldquo;u&rdquo; to D, &ldquo;a&rdquo; to C, and then &ldquo;d&rdquo; to D that can be followed from A. But the same string denotes a <i>non-sequence</i> from, for example, B, because attempting to follow the same chain fails: we can follow the initial action &ldquo;u&rdquo; from B to C, but we can&rsquo;t follow the second action &ldquo;a&rdquo; from C, because there is no action &ldquo;a&rdquo; from C.
</p>

<p>
Notice that because the empty sequence is always a valid action sequence, that, correspondingly, the empty sequence is <i>never</i> a valid non-sequence. In other words, it is <i>always</i> possible to do nothing.
</p>
</div>

<ul class="org-ul">
<li><a id="org51cdfcb"></a><span class="todo TODO">TODO</span> think about this more; what would it mean for &ldquo;no action&rdquo; not to be a possibility?<br /></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orge89d33e" class="outline-3">
<h3 id="orge89d33e">What da heckie are <i>configuration classes</i>?</h3>
<div class="outline-text-3" id="text-orge89d33e">
<p>
Sometimes it&rsquo;s not a singular particular dungeon configuration you are interested in getting to, but a <i>class</i> of dungeon configurations, i.e., a <b>configuration class</b>. For example, suppose you want to unlock the big scary door. Suppose also that there is a switch that controls whether the water wheel is on or off. But the key to the big scary door is accessible regardless of the state of the water wheel. In other words, it doesn&rsquo;t matter to you whether the water wheel is activated or not, you only care about whether the big scary door is unlocked. Thus what you care about is not a singular particular dungeon configuration, but rather the <i>class of all dungeon configurations such that the big scary door is unlocked</i>, which consists of at least two different dungeon configurations: one where the water wheel is activated, and one where the water wheel in not activated.
</p>


<div id="org7ed7606" class="figure">
<p><img src="../images/dungeon_b.png" alt="dungeon_b.png" />
</p>
</div>

<p>
In this diagram, there are four configurations:
</p>
<dl class="org-dl">
<dt><code>L</code></dt><dd>water wheel is <i>inactive</i> and big scary door is <i>locked</i>!</dd>
<dt><code>U</code></dt><dd>water wheel is <i>inactive</i> and big scary door is <i>unlocked</i>!</dd>
<dt><code>WL</code></dt><dd>water wheel is <i>active</i> and big scary door is <i>locked</i>!</dd>
<dt><code>WU</code></dt><dd>water wheel is <i>active</i> and big scary door is <i>unlocked</i>!</dd>
</dl>

<p>
Since you only care about the configurations where the big scary door is unlocked, you care about the class of configurations consisting of <code>WU</code> and <code>U</code>! As you can see, among this class of configurations is the possibility of the water wheel being active and the possibility of it not being active. And that&rsquo;s okay, because you don&rsquo;t care about whether the water wheel is active!
</p>

<p>
Also notice the arrows. We are assuming that the switch that toggles the activation of the water wheel can be toggled to the player&rsquo;s heart&rsquo;s content, but that the big scary door, once unlocked, can never be locked back up. This is why you see mutual arrows going both forwards and bacwards between <code>L</code> and <code>WL</code> and between <code>U</code> and <code>WU</code>, but you only see rightwards arrows from <code>L</code> to <code>U</code> and from <code>WL</code> to <code>WU</code>.
</p>

<p>
Notice also that there&rsquo;s no single action the player can take to simultaneously activate the water wheel and unlock the door. The diagram shows that the only two ways to get from <code>L</code> to <code>WU</code> is either first to activate the water wheel and then to unlock the door, or first to unlock the door and then to activate the water wheel.
</p>
</div>
</div>
</div>

<div id="outline-container-orgc1e731d" class="outline-2">
<h2 id="orgc1e731d">Dungeon topology</h2>
<div class="outline-text-2" id="text-orgc1e731d">
<p>
A dungeon is similar to a maze in that from any point A to any point B there may be any number (possibly 0) of possible paths you can take. Unlike a maze though, which has fixed topology, a dungeon often has <i>dynamic topology</i>. In particular, this dynamism is due to the fact that the topology of the dungeon is a <i>function of the dungeon&rsquo;s state</i>. In other words, the collection of sets for each location in the dungeon of all possible paths you can take from that location varies depending on the values of dungeon&rsquo;s state variables.
</p>

<p>
For example, suppose you can only get from across a moat if the draw bridge is lowered. When the draw bridge is raised, there is no direct path from either side to the other. When the draw bridge is lowered, there is a path from either side to the other. That is to show that the topology is different depending on the status of the draw bridge.
</p>
</div>

<div id="outline-container-org5be45bb" class="outline-3">
<h3 id="org5be45bb">The dungeon map</h3>
<div class="outline-text-3" id="text-org5be45bb">
<p>
Consider the dungeon map. This shows the general physical layout of the dungeon, ignoring the specifics that vary.
</p>

<p>
Here&rsquo;s an example of a dungeon map:
</p>


<div id="orgaea978c" class="figure">
<p><img src="../images/dungeon_l.png" alt="dungeon_l.png" />
</p>
</div>

<p>
Here we have a map of a dungeon which can be seen as having four rooms: A, B, C, and D. Three squarish shaped rooms A, B, and C at the top and a round room D at the bottom. Room B is conjoined with all three other rooms via small passageways.
</p>

<p>
Suppose we want to represent this map using a diagram similar to state space diagrams. It might be tempting to create a diagram like this one:
</p>


<div id="org4c08236" class="figure">
<p><img src="../images/dungeon_m.png" alt="dungeon_m.png" />
</p>
</div>

<p>
The intuition here is that each room corresponds to a circle in the diagram, and each arrow corresponds to a way from one room to another room. Each arrow here is accompanied with a corresponding arrow in the reverse direction, because each passageway can be walked through in both directions.
</p>

<p>
However, this diagram is equivalent in an important sense to this one:
</p>


<div id="org436adc7" class="figure">
<p><img src="../images/dungeon_n.png" alt="dungeon_n.png" />
</p>
</div>

<p>
In other words, the more complex diagram above expclitly depicting rooms A, B, C, and D can be simplified into a single circle. This is because in the diagram above, all possible circles can be gotten to from any other circle at any time. If the player is in room C, for example, it&rsquo;s no different than if they were in room B, or A, or D, because from any of those other rooms, C can be gotten to, and from C, any of the other rooms can be gotten to.
</p>

<p>
Contrast with this dungeon map:
</p>


<div id="org17f2fc2" class="figure">
<p><img src="../images/dungeon_o.png" alt="dungeon_o.png" />
</p>
</div>

<p>
Here are two rooms A and B conjoined by a ledge denoted by the yellow arrow pointing from A to B. The ledge is too high up to climb up, but it can be jumped off of from A into B.
</p>

<p>
The equivalent diagram for this dungeon would be this:
</p>


<div id="org46f84e5" class="figure">
<p><img src="../images/dungeon_p.png" alt="dungeon_p.png" />
</p>
</div>

<p>
This time the diagram is already completely simplified. The reason this diagram can&rsquo;t be simplified to a single circle is that A and B are different in what can be gotten to from them. From A, B can be gotten to, but from B, A cannot be gotten to. This is the critical difference between this dungeon map and the previous one: <i>not all parts of the dungeon can be accessed from all other parts of the dungeon</i>.
</p>

<p>
A first attempt at a rule can be formed for simplifying any such diagram: <i>All pairs of circles with a symetric pair of arrows between them can be reduced to a single node</i>.
</p>

<p>
Take this diagram for example:
</p>


<div id="org3a9b645" class="figure">
<p><img src="../images/dungeon_r.png" alt="dungeon_r.png" />
</p>
</div>

<p>
A and B have a <i>symetric pair of arrows</i> between them. That is, corresponding to the arrow from A to B is an arrow from B to A, and, equivalently, corresponding to the arrow from B to A, there is an arrow from A to B.
</p>

<p>
So the first step in simplifying this diagram is to merge A and B:
</p>


<div id="org169dbd9" class="figure">
<p><img src="../images/dungeon_s.png" alt="dungeon_s.png" />
</p>
</div>

<p>
Here we have replaced A and B with a single circle labeled &ldquo;A/B&rdquo; to represent both A and B simultaneously.
</p>

<p>
When we look for further opportunities for simplification, we find none, because there are no more symetric pairs of arrows between any two circles.
</p>

<p>
Our rule turns out to be insufficient for capturing all opportunities for simplification. Consider this diagram:
</p>


<div id="org6f32990" class="figure">
<p><img src="../images/dungeon_t.png" alt="dungeon_t.png" />
</p>
</div>

<p>
In this diagram it is clear that all circles can be gotten to from any other circles. A, for example, can be gotten to directly from C, and indirectly from B; B can be gotten to directly from A, and indirectly from C; and C can be gotten to directly from B, and indirectly from A.
</p>

<p>
However, there are no symetric pairs of arrows. But we can see that there is a <i>loop</i>. So we need a more general rule: <i>all circles participating in the same loop can be replaced with a single circle corresponding with that loop</i>.
</p>

<p>
Recall that a <i>loop</i> is <i>a configuration sequence such that each subsequent configuration corresponds to the target of each subsequent action in some repeatable action subsequence</i>.
</p>

<p>
The first step simplifying a loop is to identify the loop. Suppose we identify the loop A-&gt;B-&gt;C. We know its a loop because its a sequence of configurations that corresponds to the  repeatable action subsequence &ldquo;zxy&rdquo;. The second step is to replace all configurations participating in this loop; namely, A, B, and C; with a single circle, and we get this:
</p>


<div id="orgb05e2fa" class="figure">
<p><img src="../images/dungeon_n.png" alt="dungeon_n.png" />
</p>
</div>

<p>
(We could have named it &ldquo;A/B/C&rdquo; to denote that it is equivalent to A, B, and C combined.)
</p>

<p>
Our new rule for simplification should be sufficient for all cases. Let&rsquo;s consider this slightly more complex example:
</p>


<div id="orgde19078" class="figure">
<p><img src="../images/dungeon_q.png" alt="dungeon_q.png" />
</p>
</div>

<p>
Our first rule is still useful as aa rule of thumb, because symetric pairs are quick to spot. We can start to simplify this diagram by first combining A and D as well as B and E, because it is clear that they have symetric pairs of arrows between them:
</p>


<div id="org988c446" class="figure">
<p><img src="../images/dungeon_v.png" alt="dungeon_v.png" />
</p>
</div>

<p>
We replaced A and D with &ldquo;A/D&rdquo; and we replaced B and E with &ldquo;B/E&rdquo;. Notice what remained the same and what changed about the arrows. We removed the arrows between A and D and beween B and E, because we merged those into one. The arrow from C to A is now the arrow from C to &ldquo;A/D&rdquo;, because the original target A became &ldquo;A/D&rdquo;. Likewise, the arrow from F to E is now the arrow from F to &ldquo;B/E&rdquo;, because the original target E became &ldquo;B/E&rdquo;. The arrow from B to C became the arrow from &ldquo;B/E&rdquo; to C, because the original <i>source</i> B became &ldquo;B/E&rdquo;. And lastly, notice that the arrows from A to B and from D to E were replaced with a single arrow from &ldquo;A/D&rdquo; to &ldquo;B/E&rdquo;. Strictly speaking, we skipped a step. Logically, there should now be <i>two</i> arrows from &ldquo;A/D&rdquo; to &ldquo;B/E&rdquo;. But more on this later!
</p>

<p>
The next step in simplification is to notice the loop containing &ldquo;A/D&rdquo;, &ldquo;B/E&rdquo; and C. We can simplify this loop as follows:
</p>


<div id="orgcfbb49a" class="figure">
<p><img src="../images/dungeon_w.png" alt="dungeon_w.png" />
</p>
</div>

<p>
We replaced &ldquo;A/D&rdquo;, &ldquo;B/E&rdquo;, and C with &ldquo;A/B/C/D/E&rdquo;. The arrows from F to C ad from F to &ldquo;B/E&rdquo; were replaced with the arrow from A/B/C/D/E. No more simplification can be done!
</p>
</div>

<div id="outline-container-orgcdb2fad" class="outline-4">
<h4 id="orgcdb2fad"><span class="todo TODO">TODO</span> Considering distance</h4>
<div class="outline-text-4" id="text-orgcdb2fad">
<p>
The above simplifications were made based on an idea of equivalence that only considers which locations can be accessed from which other locations. But this notion of equivalence does not consider the number of steps needed in order from get from one location to another.
</p>
</div>
</div>

<div id="outline-container-orgd537fe1" class="outline-4">
<h4 id="orgd537fe1"><span class="todo TODO">TODO</span> Conditional topology (updated: <span class="timestamp-wrapper"><span class="timestamp">&lt;2020-12-07 Mon&gt;</span></span>)</h4>
<div class="outline-text-4" id="text-orgd537fe1">
<p>
As mentioned earlier, the topology of a dungeon is usually dynamic in that the places you can get to from any given place might be different depending on state variables.
</p>

<p>
This flavor of dynamic topology has the property that the number of possible locations doesn&rsquo;t change, only the paths between them does. It would be lovely if we could adapt our diagrams in order to show <i>conditional</i> arrows between the circles. This is where <i>topological template diagrams</i> come in!
</p>
</div>
</div>

<div id="outline-container-org0a5e019" class="outline-4">
<h4 id="org0a5e019"><span class="todo TODO">TODO</span> Topological templates</h4>
<div class="outline-text-4" id="text-org0a5e019">
<p>
Suppose we want to depict the general physical layout of the dungeon, similar to a map, except we dont want to ignore the ways in which the topology varies depending on the state variables.
</p>
</div>

<ul class="org-ul">
<li><a id="org5a7b298"></a><span class="todo TODO">TODO</span> Template notation (updated: <span class="timestamp-wrapper"><span class="timestamp">&lt;2020-12-07 Mon&gt;</span></span>)<br />
<div class="outline-text-5" id="text-org5a7b298">
<p>
Here&rsquo;s a way we can visually depict these conditional arrows!
</p>

<p>
This shows that you can get from location A to location B by taking action <code>a</code>. This is an <i>unconditional</i> path from A to B:
</p>


<div id="org77ccb77" class="figure">
<p><img src="https://cdn.discordapp.com/attachments/763994937276366869/778580226858942464/unknown.png" alt="unknown.png" />
</p>
</div>

<p>
Now we can consider the case where you can only get from A to B if some condition is true. We&rsquo;ll denote the dependence on the condition using parantheses around the condition. This shows that you can get from location A to location B by taking action <code>a</code> but <i>only</i> if <code>x</code> is true!:
</p>


<div id="org079f6d8" class="figure">
<p><img src="https://cdn.discordapp.com/attachments/763994937276366869/778580403463651358/unknown.png" alt="unknown.png" />
</p>
</div>

<p>
Now we can consider the case where the movement from A to B is necessarily conjoined by a side effect. Remember that a side effect of some action is when a state variable changes value when that action is taken. We&rsquo;ll denote side effects conjoined with an action using square braces! So this here shows that you can get from location A to location B by taking action <code>a</code> and that the side effect of this is that the value of state variable <code>x</code> becomes <code>y</code>:
</p>


<div id="orgd916770" class="figure">
<p><img src="https://cdn.discordapp.com/attachments/763994937276366869/778580678513655838/unknown.png" alt="unknown.png" />
</p>
</div>

<p>
We can also combine conditionals and side effects! This shows that you can get from location A to location B by taking action <code>a</code> but <i>only</i> if <code>x</code> is true. It also says that in taking this path from A to B it has the side effect that state variable <code>y</code> takes on the value of <code>z</code>:
</p>


<div id="orgacc38af" class="figure">
<p><img src="https://cdn.discordapp.com/attachments/763994937276366869/778580965530271794/unknown.png" alt="unknown.png" />
</p>
</div>

<p>
We&rsquo;ll also have a notion of <i>conditional side effects</i> (not to be confused with <i>conditional actions with unconditional side effects</i>). When we place the <code>(x)</code> after the action, it means the action is conditionally dependant on <code>x</code>. But if we place the <code>(x)</code> after the side effect, it means instead that the side effect is conditionally dependant on <code>x</code>. Here shows an <i>unconditional path</i> with a <i>conditional side effect</i>. You can always get from location A to location B by taking action <code>a</code>, and taking this path may or may not have the side effect that state variable <code>x</code> takes on value <code>y</code>. The side effect only occurs if <code>z</code> is true!:
</p>


<div id="org4dcf7cf" class="figure">
<p><img src="https://cdn.discordapp.com/attachments/763994937276366869/778581548454641684/unknown.png" alt="unknown.png" />
</p>
</div>

<p>
And of course we can have both the action and the side effect be conditional! Here is a <i>conditional path</i> with a <i>conditional side effect</i>. This shows that you can get from location A to location B only if <code>x</code> is true. And it says that in taking this path (assuming you can) that state variable <code>y</code> will take on value <code>z</code> only if <code>w</code> is true!:
</p>


<div id="orgbbbd550" class="figure">
<p><img src="https://cdn.discordapp.com/attachments/763994937276366869/778581943599628308/unknown.png" alt="unknown.png" />
</p>
</div>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-org4c153e4" class="outline-3">
<h3 id="org4c153e4">Dungeon space</h3>
<div class="outline-text-3" id="text-org4c153e4">
<p>
Notice that its possible for any point in the dungeon topology to be paired with multiple possible dungeon configurations. And notice that its possible for any point in the dungeon state space (i.e., every dungeon configuration) to be paired with multiple points in the dungeon topology. In other words, for every location you could be in the dungeon, there are typically multiple configurations that the dungeon could have. And conversely, for every configuration the dungeon could have, you could typically be in several different locations in the dungeon.
</p>

<p>
There&rsquo;s another way to think about the topology of the dungeon. If we consider all of the pairs of topologically distinct location on the dungeon map with every possible configuration that the dungeon can be in when the payer is at that location, and if we consider the paths between these pairs such that each path represents either a physical movement of the player <i>or</i> an action (which has a side effect on the dungeon configuration), (or possible both simultaneously), then we end up with an <i>unconditional</i> and wholistic topological view of the dungeon. We will call this <b>dungeon space</b>.
</p>

<p>
Dungeon space is useful because it allows us to represent wholistically how the player is able to progress through the dungeon both in terms of dungeon state and in terms of physical movement of the player.
</p>
</div>

<div id="outline-container-org866e280" class="outline-4">
<h4 id="org866e280"><span class="todo TODO">TODO</span> Conditional topology × state space (updated: <span class="timestamp-wrapper"><span class="timestamp">&lt;2020-12-07 Mon&gt;</span></span>)</h4>
<div class="outline-text-4" id="text-org866e280">
<p>
There is a systematic way of deriving a dungeon space diagram from a topological template diagram and the state space diagram of the dungeon. Essentially you just have to pair every location in the topological template diagram with every state in the state space diagram that is possibly achievable in that location!
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org304f0b7" class="outline-2">
<h2 id="org304f0b7"><span class="todo TODO">TODO</span> Analysis: Temple of Time (Twilight Princess)</h2>
</div>

<div id="outline-container-org555f78c" class="outline-2">
<h2 id="org555f78c"><span class="todo TODO">TODO</span> Analysis of game mechanics</h2>
</div>

<div id="outline-container-orgb2cd973" class="outline-2">
<h2 id="orgb2cd973"><span class="todo TODO">TODO</span> Dungeon generation (updated: <span class="timestamp-wrapper"><span class="timestamp">&lt;2020-12-07 Mon&gt;</span></span>)</h2>
<div class="outline-text-2" id="text-orgb2cd973">
<p>
I want to come up with a sort of formula for constructing dungeons by sort of throwing the &ldquo;dice of logic&rdquo; and seeing what comes up!!
</p>

<p>
If you can randomly generate a graph of whatever size and complexity you choose, it&rsquo;d be really cool then to use that to represent a dungeon space. From there you could &ldquo;factor out&rdquo; the dungeon topological template/map + the dungeon state space. And from there you can draw up a real dungeon following the map, and map your palette of dungeon mechanics onto the dungeon state space! There&rsquo;s a lot of creative freedom here, but it would also give you a formal guide to randomly generate the logical structure of a dungeon within whatever parameters you want.
</p>

<p>
So the ultimate goal of this whole dungeon topology exploration is to be able to do this!
</p>
</div>
</div>

<div id="outline-container-org933d884" class="outline-2">
<h2 id="org933d884"><span class="todo TODO">TODO</span> Information theory analysis</h2>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Nancy</p>
<p class="date">Created: 2020-12-08 Tue 16:11</p>
</div>
</body>
</html>
